{% extends 'principal/baseprojeto.html' %}
{% load bootstrap %}
{% block conteudo %}
<!-- Arrumar mask -->
<script>
    $('document').ready(function() {        
        $("#id_cep").mask("00000-000");
        $('#id_Cnpj').mask('00.000.000/0000-00', {reverse: true});
        $('#id_Telefone').mask('(00) 0000-0000');
})
</script>

<div class="container top">
    <body class="my-login-page">
        <section class="h-100">
            <div class="container h-100">
                <div class="row justify-content-md-center h-100">
                    <div class="card-wrapper">
                        <div class="card fat">
                            <div class="card-body">
                                <h2 class="titulo">Editar Empresa</h2>
                                <hr class="divider"/>
                                <form method="POST" class="my-login-validation" novalidate="">
                                    {% csrf_token %}
                                    {{ FormularioSimples.Nome|bootstrap }}
                                    {{ FormularioSimples.email|bootstrap }}
                                    {{ FormularioSimples.cep|bootstrap }}
                                    {{ FormularioSimples.Pais|bootstrap }}
                                    {{ FormularioSimples.estado|bootstrap }}
                                    {{ FormularioSimples.cidade|bootstrap }}
                                    {{ FormularioSimples.bairro|bootstrap }}
                                    {{ FormularioSimples.logradouro|bootstrap }}
                                    {{ FormularioSimples.Cnpj|bootstrap }}
                                    {{ FormularioSimples.Telefone|bootstrap }}
                                    <br>
                                    <div class="d-grid gap-2 col-6 mx-auto">
                                        <button class="btn btn-outline-primary" id="botao" type="submit">Cadastrar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </body>
</div>
<br>
<script>
$( document ).ready(function() {
        $("#id_cep").focusout(function(){
            //Início do Comando AJAX
            $.ajax({
                //O campo URL diz o caminho de onde virá os dados
                //É importante concatenar o valor digitado no CEP
                url: 'https://viacep.com.br/ws/'+$(this).val().replace(".","").replace("-","")+'/json/unicode/',
                //Aqui você deve preencher o tipo de dados que será lido,
                //no caso, estamos lendo JSON.
                dataType: 'json',
                //SUCESS é referente a função que será executada caso
                //ele consiga ler a fonte de dados com sucesso.
                //O parâmetro dentro da função se refere ao nome da variável
                //que você vai dar para ler esse objeto.
                success: function(resposta){
                    //Agora basta definir os valores que você deseja preencher
                    //automaticamente nos campos acima.
                    if (resposta.erro) {
                        $("#id_cep").removeClass('valid');
                        $("#id_cep").addClass('invalid');
                    }
                    $("#id_logradouro").val(resposta.logradouro);                    
                    $("#id_bairro").val(resposta.bairro);
                    $("#id_cidade").val(resposta.localidade);
                    $("#id_estado").val(resposta.uf);
                    
                    //Vamos incluir para que o Número seja focado automaticamente
                    //melhorando a experiência do usuário
                    
                    $("#id_numero").focus();
                }
            });
        });
    });    
    
</script>         
{% endblock %}